<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-articles/lucky-STUN/lucky-web" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">在Windows下使用lucky配置反向代理以实现较为安全的WEB访问 | ie12sBlog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ie12blog.36102025.xyz/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ie12blog.36102025.xyz/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ie12blog.36102025.xyz/articles/lucky-STUN/lucky-web"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="在Windows下使用lucky配置反向代理以实现较为安全的WEB访问 | ie12sBlog"><meta data-rh="true" name="description" content="2024.06.22"><meta data-rh="true" property="og:description" content="2024.06.22"><link data-rh="true" rel="icon" href="/img/Internet_Explorer_10.svg"><link data-rh="true" rel="canonical" href="https://ie12blog.36102025.xyz/articles/lucky-STUN/lucky-web"><link data-rh="true" rel="alternate" href="https://ie12blog.36102025.xyz/articles/lucky-STUN/lucky-web" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://ie12blog.36102025.xyz/articles/lucky-STUN/lucky-web" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"LCUKY系列教程","item":"https://ie12blog.36102025.xyz/lucky-STUN"},{"@type":"ListItem","position":2,"name":"在Windows下使用lucky配置反向代理以实现较为安全的WEB访问","item":"https://ie12blog.36102025.xyz/articles/lucky-STUN/lucky-web"}]}</script><link rel="stylesheet" href="/assets/css/styles.0bfc4a4f.css">
<script src="/assets/js/runtime~main.3e88349c.js" defer="defer"></script>
<script src="/assets/js/main.0a4f6813.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.png"><link rel="preload" as="image" href="../../images/lucky-web/direct-access.webp"><link rel="preload" as="image" href="../../images/lucky-web/port-reuse.webp"><link rel="preload" as="image" href="../../images/lucky-web/tls-encryption.webp"><link rel="preload" as="image" href="../../images/lucky-web/dynv6-cname.webp"><link rel="preload" as="image" href="../../images/lucky-web/dynv6-cname-2.webp"><link rel="preload" as="image" href="../../images/lucky-web/dynv6-cname-3.webp"><link rel="preload" as="image" href="../../images/lucky-web/dynv6-cname-4.webp"><link rel="preload" as="image" href="../../images/lucky-web/dynv6-cname-5.webp"><link rel="preload" as="image" href="../../images/lucky-web/cf-cname.webp"><link rel="preload" as="image" href="../../images/lucky-web/cf-cname-2.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-service.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-service-add-rule.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-main-rule.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-add-sub-rule.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-sub-rule-configuration.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-sub-rule-result.webp"><link rel="preload" as="image" href="../../images/lucky-web/access-test-alist.webp"><link rel="preload" as="image" href="../../images/lucky-web/access-test-multiple-rules.webp"><link rel="preload" as="image" href="../../images/lucky-web/access-test-qb.webp"><link rel="preload" as="image" href="../../images/lucky-web/access-test-op.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-edit-sub-rule.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-enable-tls.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-inspect-tls.webp"><link rel="preload" as="image" href="../../images/lucky-web/access-test-op-tls.webp"><link rel="preload" as="image" href="../../images/lucky-web/access-test-alist-tls.webp"><link rel="preload" as="image" href="../../images/lucky-web/access-test-qb-tls.webp"><link rel="preload" as="image" href="../../images/lucky-web/view-certificate-1.webp"><link rel="preload" as="image" href="../../images/lucky-web/view-certificate-2.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-redirect-rule.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-redirect-rule-2.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-redirect-rule-3.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-secure-redirect-1.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-secure-redirect-2.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-secure-redirect-3.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-secure-redirect-4.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-close-connection.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-close-connection-2.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-close-connection-3.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-secure-redirect-5.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-authentication-1.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-authentication-2.webp"><link rel="preload" as="image" href="../../images/lucky-web/web-authentication-3.webp"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ie12sBlog</b></a><a href="https://github.com/ie123610/ie12sBlog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub版博客<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://space.bilibili.com/390936347/article" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">B站专栏<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.cnblogs.com/ie123610/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">博客园<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.cometbbs.com/t/%E6%AF%94%E7%89%B9%E5%BD%97%E6%98%9F-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E7%9A%84%E6%94%B6%E9%9B%86%E4%B8%8E%E8%A7%A3%E5%86%B3/86304" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">彗星论坛<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ie123610/ie12sBlog.Pages/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub后端<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="关于" class="linkLabel_WmDU">关于</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/the-index"><span title="索引" class="linkLabel_WmDU">索引</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://bc.36102025.xyz/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="比特彗星资源导航" class="linkLabel_WmDU">比特彗星资源导航</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/bitcomet-FAQ"><span title="比特彗星-常见问题" class="categoryLinkLabel_W154">比特彗星-常见问题</span></a><button aria-label="展开侧边栏分类 &#x27;比特彗星-常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/bitcomet-port-forwarding"><span title="比特彗星-端口阻塞解决方案" class="categoryLinkLabel_W154">比特彗星-端口阻塞解决方案</span></a><button aria-label="展开侧边栏分类 &#x27;比特彗星-端口阻塞解决方案&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/lucky-STUN"><span title="LCUKY系列教程" class="categoryLinkLabel_W154">LCUKY系列教程</span></a><button aria-label="折叠侧边栏分类 &#x27;LCUKY系列教程&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/cf-srv-record-settings"><span title="「补充篇」在Cloudflare上设置并更新SRV记录" class="linkLabel_WmDU">「补充篇」在Cloudflare上设置并更新SRV记录</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/email-notification-port"><span title="「LUCKY STUN穿透」使用邮件通知端口变化情况" class="linkLabel_WmDU">「LUCKY STUN穿透」使用邮件通知端口变化情况</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/lucky-ddns-2.15"><span title="Lucky v2.15 版本后的DDNS配置方法" class="linkLabel_WmDU">Lucky v2.15 版本后的DDNS配置方法</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/lucky-ddns"><span title="在Windows下使用lucky更新动态域名" class="linkLabel_WmDU">在Windows下使用lucky更新动态域名</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/lucky-tls-automation"><span title="在Windows下使用lucky实现TLS/SSL证书自动化" class="linkLabel_WmDU">在Windows下使用lucky实现TLS/SSL证书自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/lucky-vxkex-compatible"><span title="使用VxKex使高版本LCUKY可在win7上运行" class="linkLabel_WmDU">使用VxKex使高版本LCUKY可在win7上运行</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/articles/lucky-STUN/lucky-web"><span title="在Windows下使用lucky配置反向代理以实现较为安全的WEB访问" class="linkLabel_WmDU">在Windows下使用lucky配置反向代理以实现较为安全的WEB访问</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-VNT-networkin"><span title="「LUCKY STUN穿透」在Windows下使用VNT组网为非HTTP服务固定STUN穿透端口" class="linkLabel_WmDU">「LUCKY STUN穿透」在Windows下使用VNT组网为非HTTP服务固定STUN穿透端口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-bc-port-automation"><span title="「LUCKY STUN穿透」使用脚本自动修改比特彗星的监听端口" class="linkLabel_WmDU">「LUCKY STUN穿透」使用脚本自动修改比特彗星的监听端口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-bt"><span title="LUCKY STUN穿透在Windows上使用UPnP工具为BT客户端自动添加内外端口号不同的映射规则" class="linkLabel_WmDU">LUCKY STUN穿透在Windows上使用UPnP工具为BT客户端自动添加内外端口号不同的映射规则</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-cf-redirection"><span title="「扩展篇」使用Cloudflare的重定向规则传递资源路径和查询字符串" class="linkLabel_WmDU">「扩展篇」使用Cloudflare的重定向规则传递资源路径和查询字符串</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-docker-upnp"><span title="「LUCKY STUN穿透」在Docker中使用MiniUPnP为BT客户端自动添加内外端口不同的映射规则" class="linkLabel_WmDU">「LUCKY STUN穿透」在Docker中使用MiniUPnP为BT客户端自动添加内外端口不同的映射规则</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-mc-srv"><span title="[LUCKY」在Windows下使用STUN穿透实现Minecraft联机并设置SRV记录" class="linkLabel_WmDU">[LUCKY」在Windows下使用STUN穿透实现Minecraft联机并设置SRV记录</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-qb-port-automation"><span title="「LUCKY STUN穿透」使用webhook自动修改 qbittorrent 的监听端口" class="linkLabel_WmDU">「LUCKY STUN穿透」使用webhook自动修改 qbittorrent 的监听端口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-tr-modify-port"><span title="「LUCKY STUN穿透」使用 cURL 自动修改 Transmission 的监听端口" class="linkLabel_WmDU">「LUCKY STUN穿透」使用 cURL 自动修改 Transmission 的监听端口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-v4-v6-redirect"><span title="「LUCKY STUN穿透」IPv4和IPv6分离重定向" class="linkLabel_WmDU">「LUCKY STUN穿透」IPv4和IPv6分离重定向</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/stun-web-serve-CF"><span title="「LUCKY STUN穿透」使用Cloudflare的页面规则固定和隐藏网页端口" class="linkLabel_WmDU">「LUCKY STUN穿透」使用Cloudflare的页面规则固定和隐藏网页端口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/svcb-records-hidden-ports"><span title="使用SVCB/HTTPS记录隐藏和固定Web服务端口" class="linkLabel_WmDU">使用SVCB/HTTPS记录隐藏和固定Web服务端口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/update-TXT-record-on-cf-and-dynv6"><span title="「前置」在Dynv6和Cloudflare上更新TXT记录" class="linkLabel_WmDU">「前置」在Dynv6和Cloudflare上更新TXT记录</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/articles/lucky-STUN/uptime-upnp-keep-alive"><span title="「LUCKY STUN穿透」使用UptimeRobot使UPnP映射的TCP规则保持活跃" class="linkLabel_WmDU">「LUCKY STUN穿透」使用UptimeRobot使UPnP映射的TCP规则保持活跃</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/virtual-private-network"><span title="虚拟专用网络系列教程" class="categoryLinkLabel_W154">虚拟专用网络系列教程</span></a><button aria-label="展开侧边栏分类 &#x27;虚拟专用网络系列教程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ipv6-transition"><span title="IPv6过渡方案" class="categoryLinkLabel_W154">IPv6过渡方案</span></a><button aria-label="展开侧边栏分类 &#x27;IPv6过渡方案&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/research-logs"><span title="研究记录" class="categoryLinkLabel_W154">研究记录</span></a><button aria-label="展开侧边栏分类 &#x27;研究记录&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/lucky-STUN"><span>LCUKY系列教程</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">在Windows下使用lucky配置反向代理以实现较为安全的WEB访问</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>在Windows下使用lucky配置反向代理以实现较为安全的WEB访问</h1></header>
<p>2024.06.22</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="关于本教程">关于本教程<a href="#关于本教程" class="hash-link" aria-label="关于本教程的直接链接" title="关于本教程的直接链接" translate="no">​</a></h2>
<p>本文将主要介绍以下内容：<br>
<!-- -->若图片显示不清楚可 在新标签页中打开图片 或 保存到本地查看</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>文章结构</summary><div><div class="collapsibleContent_i85q"><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">关于本教程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─反向代理和正向代理的区别</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─使用简单反向代理的好处</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─&quot;端口复用&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─TLS加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─访问控制</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─域名设置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─在Dynv6中设置记录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─在Cloudflare中设置记录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─配置地址解析</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─配置基础反向代理规则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─配置HTTPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─开启TLS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─配置HTTP重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─防范恶意扫描</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─来自网络扫描器的威胁</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├─为未匹配域名的请求设置重定向</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └─配置Basic认证</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─常见问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─参考</span><br></span></code></pre></div></div></div></div></details>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="反向代理和正向代理的区别">反向代理和正向代理的区别<a href="#反向代理和正向代理的区别" class="hash-link" aria-label="反向代理和正向代理的区别的直接链接" title="反向代理和正向代理的区别的直接链接" translate="no">​</a></h2>
<p>相比起反向代理<strong>正向代理</strong>更为人所知<br>
<!-- -->我们也一般直接简称为代理</p>
<p>即通过用户通过代理服务器来连接想要访问的目标服务器<br>
<!-- -->其实光从连接流程上来看正向代理和反向代理是差不多的<br>
<!-- -->都是 用户-代理服务器-目标服务器</p>
<p>但正向代理 代理的是（用户的）<strong>客户端</strong> 即代替客户端与目标服务器连接<br>
<!-- -->这样在目标服务器看来代理服务器就是来访问的用户<br>
<!-- -->而真正的客户端没有和目标服务器&quot;直接接触&quot;被隐藏了起来</p>
<p>而反向代理代理的是 <strong>服务端</strong> 即代替真正的服务器接受用户的连接<br>
<!-- -->这样在用户看来代理服务器就是要访问的目标服务器<br>
<!-- -->而真正的目标服务器没有和用户&quot;直接接触&quot;被隐藏了起来</p>
<p><strong>正向代理隐藏了客户端而反向代理隐藏了服务端</strong></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用简单反向代理的好处">使用简单反向代理的好处<a href="#使用简单反向代理的好处" class="hash-link" aria-label="使用简单反向代理的好处的直接链接" title="使用简单反向代理的好处的直接链接" translate="no">​</a></h2>
<p>在家庭网络环境下使用反向代理主要有以下三点好处</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="端口复用">“端口复用”<a href="#端口复用" class="hash-link" aria-label="“端口复用”的直接链接" title="“端口复用”的直接链接" translate="no">​</a></h3>
<p>在一般情况下是<strong>使用端口来区分服务</strong><br>
<!-- -->即用不同的端口号对应不同的服务<br>
<!-- -->比如 路由器管理界面 NAS管理界面 BT软件webUI界面</p>
<img src="../../images/lucky-web/direct-access.webp" width="60%" height="60%">
<p>不过服务一多起来就需要记忆很多端口而且端口是纯数字并 <strong>不方便记忆</strong><br>
<!-- -->使用反向代理可以实现&quot;端口复用&quot;让 <strong>多个服务使用同一个端口</strong></p>
<p>由反向代理接受用户的请求之后再转发到对应的服务端<br>
<!-- -->当然这意味着反向代理也需要一种方法来区分 <strong>用户究竟想要访问什么</strong></p>
<p>常见的区分后端服务的方法分别是:</p>
<ul>
<li>域名区分</li>
<li>资源路径区分</li>
</ul>
<p>比如这里有一个域名 <code>ie12.net</code>
根据域名来区分 <strong>即根据二级（多级）名称来区分</strong></p>
<ul>
<li><code>qb.ie12.net</code></li>
<li><code>op.ie12.net</code></li>
<li><code>alist.ie12.net</code></li>
</ul>
<p>通过资源路径区分:</p>
<ul>
<li><code>ie12.net/qb/</code></li>
<li><code>ie12.net/op/</code></li>
<li><code>ie12.net/alist/</code></li>
</ul>
<img src="../../images/lucky-web/port-reuse.webp" width="60%" height="60%">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tls加密">TLS加密<a href="#tls加密" class="hash-link" aria-label="TLS加密的直接链接" title="TLS加密的直接链接" translate="no">​</a></h3>
<p>关于TLS在之前的教程中已有所讲解 详见：<a href="/articles/lucky-STUN/lucky-tls-automation">链接</a> </p>
<img src="../../images/lucky-web/tls-encryption.webp" width="60%" height="60%">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="访问控制">访问控制<a href="#访问控制" class="hash-link" aria-label="访问控制的直接链接" title="访问控制的直接链接" translate="no">​</a></h3>
<p>由于反向代理隐藏了真正的源服务器所以用户在<strong>访问时连接的是反向代理服务器</strong><br>
<!-- -->可以在其上<strong>进行统一的访问控制</strong>而无需在每一台服务器上都设置一遍</p>
<p>其实之前的“端口复用”法就能起到一定的访问控制效果<br>
<strong>必须要匹配上域名或者资源路径才能访问到对应的服务</strong></p>
<p>若匹配不上就不能访问 可以有效防范扫描攻击<br>
<!-- -->当然除此之外也还能设置更多的访问控制条件</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="域名设置">域名设置<a href="#域名设置" class="hash-link" aria-label="域名设置的直接链接" title="域名设置的直接链接" translate="no">​</a></h2>
<p>在本教程中将使用<strong>域名法</strong>区分法来区分后端服务</p>
<p>即通过不同的子域名来对应不同的后端服务<br>
<!-- -->当然这些子域名只是名字不同它们<strong>指向的IP都是相同的</strong></p>
<p>我们可以为每个子域名都设置IP地址并使用DDNS来更新<br>
<!-- -->但这样太麻烦了 更好的方法是使用 <strong>CNAME记录</strong> 即别名记录</p>
<p>其不指向IP地址而是指向<strong>另一个域名</strong><br>
<!-- -->比如这里有域名 ie12.net 则可以设置CNAME记录</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">www.ie12.net   ┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">video.ie12.net ├─ ie12.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file.ie12.net  ┘ </span><br></span></code></pre></div></div>
<p>这样这三个域名的IP地址即为ie12.net所记录的IP地址
更新IP地址时<strong>只需要更新 <code>ie12.net</code> 即可</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="在dynv6中设置记录">在Dynv6中设置记录<a href="#在dynv6中设置记录" class="hash-link" aria-label="在Dynv6中设置记录的直接链接" title="在Dynv6中设置记录的直接链接" translate="no">​</a></h3>
<p>有关Dynv6的部分配置方法在之前的教程中有所讲解 详见：<a href="/articles/lucky-STUN/lucky-ddns">链接</a> <br>
<!-- -->登录Dynv6 》 点击 My Zones 》 选择你的动态域名 》 添加CNAME记录</p>
<img src="../../images/lucky-web/dynv6-cname.webp" width="60%" height="60%">
<p>填写二级域名 host部分可以留空即使用上级主域名</p>
<img src="../../images/lucky-web/dynv6-cname-2.webp" width="60%" height="60%">
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/dynv6-cname-3.webp" width="60%" height="60%">
<p>当然我们也可以将其指向其他域名 不过要在指向的域名后加上英文点号 <code>.</code></p>
<img src="../../images/lucky-web/dynv6-cname-4.webp" width="60%" height="60%">
<p>如果不加上英文点号的话 整个欲指向的域名就就会被加到前面</p>
<img src="../../images/lucky-web/dynv6-cname-5.webp" width="60%" height="60%">
<p><strong>若需要多个子级域名则重复上述设置即可</strong><br>
<strong>若服务数量较多可以使用 泛域名解析替代</strong><br>
<!-- -->更新IP地址时<strong>只需更新主动态域名</strong>（<code>ie12test.dynv6.net</code>）即可</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="在cloudflare中设置记录">在Cloudflare中设置记录<a href="#在cloudflare中设置记录" class="hash-link" aria-label="在Cloudflare中设置记录的直接链接" title="在Cloudflare中设置记录的直接链接" translate="no">​</a></h3>
<p>有关CF的部分配置方法在之前的教程中有所讲解 详见：<a href="/articles/lucky-STUN/lucky-ddns">链接</a> <br>
<!-- -->登录CF 》 点击侧边栏中的网站 》 选择你的域名 》 点击侧边栏中的DNS<br>
<!-- -->（Cloudflare下文简称CF）相比起Dynv6 CF上的设置更加简单</p>
<p>点击添加记录 》 类型选择CNAME 》 名称自定义 方便记忆和区分服务即可 》<br>
<!-- -->代理状态关闭即仅DNS 》 目标直接填写主域名即可 》 保存</p>
<img src="../../images/lucky-web/cf-cname.webp" width="60%" height="60%">
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/cf-cname-2.webp" width="60%" height="60%">
<p><strong>若需要多个子级域名则重复上述设置即可</strong><br>
<strong>若服务数量较多可以使用 泛域名解析替代</strong><br>
<!-- -->更新IP地址时<strong>只需更新主域名</strong>（<code>ie12.com</code>）即可</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置地址解析">配置地址解析<a href="#配置地址解析" class="hash-link" aria-label="配置地址解析的直接链接" title="配置地址解析的直接链接" translate="no">​</a></h2>
<p>完成上述配置后我们只需要更新主域名就可以同步更新所有子域名的IP<br>
<!-- -->DDNS更新方法在之前的教程中已讲解过 详见：<a href="/articles/lucky-STUN/lucky-ddns">链接</a>   </p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置基础反向代理规则">配置基础反向代理规则<a href="#配置基础反向代理规则" class="hash-link" aria-label="配置基础反向代理规则的直接链接" title="配置基础反向代理规则的直接链接" translate="no">​</a></h2>
<p>在完成了（动态）域名设置的工作后我们就可以开始配置反向代理规则了</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建web规则">创建WEB规则<a href="#创建web规则" class="hash-link" aria-label="创建WEB规则的直接链接" title="创建WEB规则的直接链接" translate="no">​</a></h3>
<p>登录lucky 》 点击侧边栏的WEB服务 》 添加WEB服务规则</p>
<img src="../../images/lucky-web/web-service.webp">
<img src="../../images/lucky-web/web-service-add-rule.webp" width="60%" height="60%">
<ol>
<li>名称可自定义 这里使用&quot;反向代理&quot;</li>
<li>监听类型 <strong>全选</strong></li>
<li>监听端口可自定义 这里使用默认的16666此端口为之后访问各服务的<strong>共用端口</strong></li>
<li>确保该端口已经打开<strong>可在外网被访问到</strong></li>
<li>此处的防火墙放行选项是为Linux系统下iptable设计的在windows、docker下无效</li>
<li>保存规则</li>
</ol>
<p><strong>示例</strong></p>
<img src="../../images/lucky-web/web-main-rule.webp" width="60%" height="60%">
<p>为服务添加子规则 点击添加子规则</p>
<img src="../../images/lucky-web/web-add-sub-rule.webp" width="60%" height="60%">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="编辑规则内容">编辑规则内容<a href="#编辑规则内容" class="hash-link" aria-label="编辑规则内容的直接链接" title="编辑规则内容的直接链接" translate="no">​</a></h3>
<ol>
<li>子规则名称 可自定义 建议使用方便区分的名字  这边使用alist网盘服务进行演示</li>
<li>服务类型：<strong>反向代理</strong></li>
<li>前端地址 填写之前配置好用于<strong>代表服务的子（二级）域名</strong>这里用的是 <code>alist.ie12test.dynv6.net</code><br>
<!-- -->（只填域名即可不用加HTTP或者端口号）</li>
<li>后端地址 则是在内网访问服务时所使用的IP和端口 这里使用 <code>192.168.5.120:5244</code><br>
<!-- -->若lucky和被反代的服务运行在同一设备上则可以使用127.0.0.1若不是则应使用局域网IP</li>
<li>打开万事大吉的开关 自动添加常见HTTP 请求头</li>
<li>保存规则</li>
</ol>
<p><strong>示例</strong></p>
<img src="../../images/lucky-web/web-sub-rule-configuration.webp" width="60%" height="60%">
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/web-sub-rule-result.webp" width="60%" height="60%">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="访问测试">访问测试<a href="#访问测试" class="hash-link" aria-label="访问测试的直接链接" title="访问测试的直接链接" translate="no">​</a></h3>
<p>在浏览器中输入 前端域名和端口 <strong>查看访问效果</strong><br>
<!-- -->示例：<code>http://alist.ie12test.dynv6.net:16666/</code></p>
<img src="../../images/lucky-web/access-test-alist.webp" width="60%" height="60%">
<p>多规则效果演示</p>
<img src="../../images/lucky-web/access-test-multiple-rules.webp" width="60%" height="60%">
<img src="../../images/lucky-web/access-test-qb.webp" width="60%" height="60%">
<img src="../../images/lucky-web/access-test-op.webp" width="60%" height="60%">
<p><strong>！注意！</strong> qb需要关闭host header验证或打开定制模式中的 使用目标地址host请求头<br>
<!-- -->否则会出现 Unauthorized 的报错 至此我们已经<strong>完成了最基本的反向代理设置</strong></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置https">配置HTTPS<a href="#配置https" class="hash-link" aria-label="配置HTTPS的直接链接" title="配置HTTPS的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="开启tls">开启TLS<a href="#开启tls" class="hash-link" aria-label="开启TLS的直接链接" title="开启TLS的直接链接" translate="no">​</a></h3>
<p>在互联网中使用HTTP明文访问并不安全 我们需加密的HTTPS<br>
<!-- -->关于TLS和HTTPS的讲解请看之前的教程 完成链接中的内容后再继续接下来的步骤<br>
<!-- -->详见：<a href="/articles/lucky-STUN/lucky-tls-automation">链接</a></p>
<p>编辑反代规则 <strong>开启TLS开关</strong></p>
<img src="../../images/lucky-web/web-edit-sub-rule.webp" width="60%" height="60%">
<img src="../../images/lucky-web/web-enable-tls.webp" width="60%" height="60%">
<p>检视效果 前端地址<strong>已经变成HTTPPS开头</strong></p>
<img src="../../images/lucky-web/web-inspect-tls.webp" width="60%" height="60%">
<p><strong>访问测试</strong></p>
<img src="../../images/lucky-web/access-test-op-tls.webp" width="60%" height="60%">
<img src="../../images/lucky-web/access-test-alist-tls.webp" width="60%" height="60%">
<img src="../../images/lucky-web/access-test-qb-tls.webp" width="60%" height="60%">
<p><strong>查看证书</strong></p>
<img src="../../images/lucky-web/view-certificate-1.webp">
<img src="../../images/lucky-web/view-certificate-2.webp" width="60%" height="60%">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置http重定向">配置HTTP重定向<a href="#配置http重定向" class="hash-link" aria-label="配置HTTP重定向的直接链接" title="配置HTTP重定向的直接链接" translate="no">​</a></h3>
<p>在开启HTTPS后 <strong>直接输入域名访问可能会失败</strong><br>
<!-- -->因为在不指明协议的情况下<strong>默认使用HTTP协议</strong> 我们当然可以手动加上 <code>https://</code><br>
<!-- -->不过这样比较麻烦（也有的浏览器支持自动跳转到HTTPS）</p>
<p>更好的方法是设置重新定向规则 <strong>自动的将HTTP重定向到HTTPS上</strong></p>
<p><strong>创建重定向规则</strong></p>
<ol>
<li>添加一个新的WEB服务规则</li>
<li>规则名称可自定义 这里使用 HTTP重定向</li>
<li>监听类型全选</li>
<li>监听端口 <strong>与之前设置的反向代理规则使用相同的端口</strong></li>
<li>保存规则</li>
</ol>
<p><strong>示例</strong></p>
<img src="../../images/lucky-web/web-redirect-rule.webp" width="60%" height="60%">
<p><strong>接着添加子规则</strong></p>
<ol>
<li>规则名称可自定义这里使用 一般重定向</li>
<li>服务类型选择 <strong>重定向</strong></li>
<li>前段地址填写 所使用域名的泛域名 这里使用的是 <code>*.ie12test.dynv6.net</code></li>
<li>后端地址填写 <code>https://{hostAndPort}</code></li>
<li>打开 万事大吉开关</li>
<li>保存规则</li>
</ol>
<p>后端地址中的 https:// 表示使用HTTPS协议 <br>
<!-- -->而变量 <code>{hostAndPort}</code> 则表示 <strong>请求的主机名/域名以及端口</strong><br>
<!-- -->其他可用变量：<a href="https://lucky666.cn/docs/modules/web#%E5%8F%AF%E7%94%A8%E5%8F%98%E9%87%8F" target="_blank" rel="noopener noreferrer">链接</a></p>
<p><strong>示例</strong></p>
<img src="../../images/lucky-web/web-redirect-rule-2.webp" width="60%" height="60%">
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/web-redirect-rule-3.webp" width="60%" height="60%">
<p><strong>测试重定向效果</strong><br>
<!-- -->在浏览器中直接输入域名应该可以自动跳转到HTTPS</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="防范恶意扫描">防范恶意扫描<a href="#防范恶意扫描" class="hash-link" aria-label="防范恶意扫描的直接链接" title="防范恶意扫描的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="来自网络扫描器的威胁">来自网络扫描器的威胁<a href="#来自网络扫描器的威胁" class="hash-link" aria-label="来自网络扫描器的威胁的直接链接" title="来自网络扫描器的威胁的直接链接" translate="no">​</a></h3>
<p>在完成了上述的设置后我们已经基本实现了安全的WEB访问<br>
<!-- -->不过在互联网上运行着许多的<strong>自动化的端口扫描与刺探程序（网络扫描器）</strong><br>
<!-- -->它们全天候的扫描和记录着全球设备上开放的端口及其上面的服务</p>
<p>这主要发生在IPv4上 IPv4的地址数量较少 在除去各种特殊地址后就更少了<br>
<!-- -->通过逐个IP和端口的扫描这些扫描器可以<strong>轻松扫描完全球的设备</strong></p>
<p>当然这些扫描器并不知道 我们设置的前端域名 其应只会使用IP和端口来访问<br>
<!-- -->固不能匹配上前端域名 这样一来<strong>藏在反代后方的真正服务不会被发现</strong></p>
<p>只不过在默认情况下lucky在遇到没有匹配任何域名的请求时会返回一个404错误页面<br>
<!-- -->尽管这个页面并不会泄露什么 即使是HTTPS也不用担心证书/域名泄露 <br>
<!-- -->当没有域名匹配时lucky会使用一张自签名证书 <strong>不用担心域名泄露问题</strong></p>
<p>但是通过这个404错误页面 依然能发现该端口上有<strong>名为 lucky 的WEB服务在运行</strong><br>
<!-- -->比较理想的状态是nginx的 444响应 即不发送响应<strong>直接关闭连接</strong><br>
<!-- -->但现在这个还不能实现 作者以后可能会更新类似的功能 <strong>（此功能已经更新 请看后文）</strong></p>
<p>当下比较好的方法是：<br>
<strong>将这些无法匹配前端域名的非法请求重新定向到其他网站</strong>比如百度之类的<br>
<!-- -->其实网络扫描器也并非百害而无一利 一些 <strong>端口搜索引擎</strong> 也会使用其来记录端口</p>
<p>例如：</p>
<ul>
<li><a href="https://www.shodan.io" target="_blank" rel="noopener noreferrer">Shodan</a></li>
<li><a href="https://search.censys.io" target="_blank" rel="noopener noreferrer">Censys</a></li>
<li><a href="https://fofa.info" target="_blank" rel="noopener noreferrer">Fofa</a></li>
</ul>
<p>我们可以使用这些端口搜索引擎来<strong>检查自己IP上暴露出的端口和服务</strong>以做到提前预防</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="为未匹配域名的请求设置重定向">为未匹配域名的请求设置重定向<a href="#为未匹配域名的请求设置重定向" class="hash-link" aria-label="为未匹配域名的请求设置重定向的直接链接" title="为未匹配域名的请求设置重定向的直接链接" translate="no">​</a></h3>
<p>编辑反向代理主规则 <strong>切换到 定制模式</strong></p>
<img src="../../images/lucky-web/web-secure-redirect-1.webp">
<p>滚动页面 》 点开默认规则 》 修改服务类型为 重定向 》<br>
<!-- -->填写默认目标地址 <code>https://www.baidu.com</code> 》 <strong>保存规则</strong></p>
<img src="../../images/lucky-web/web-secure-redirect-2.webp">
<img src="../../images/lucky-web/web-secure-redirect-3.webp" width="60%" height="60%">
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/web-secure-redirect-4.webp" width="60%" height="60%">
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v2105之后">v2.10.5之后<a href="#v2105之后" class="hash-link" aria-label="v2.10.5之后的直接链接" title="v2.10.5之后的直接链接" translate="no">​</a></h3>
<p>在v2.10.5版本更新了 <strong>关闭连接功能</strong> 可以直接切断连接不发送响应<br>
<!-- -->比重定向到百度的效果更好</p>
<p><strong>设置方法</strong><br>
<!-- -->在默认规则中将服务类型设置为 <strong>关闭连接</strong>即可 默认目标地址不用填写</p>
<img src="../../images/lucky-web/web-close-connection.webp" width="60%" height="60%">
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/web-close-connection-2.webp" width="60%" height="60%">
<p><strong>访问测试</strong><br>
<!-- -->直接使用IP+端口进行访问  <strong>连接直接关闭</strong>没有发出任何响应</p>
<img src="../../images/lucky-web/web-close-connection-3.webp">
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="编辑http重定向主规则">编辑HTTP重定向主规则<a href="#编辑http重定向主规则" class="hash-link" aria-label="编辑HTTP重定向主规则的直接链接" title="编辑HTTP重定向主规则的直接链接" translate="no">​</a></h3>
<p>修改方法和反向代理规则相同</p>
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/web-secure-redirect-5.webp" width="60%" height="60%">
<p><strong>测试重定向效果</strong>
直接使用IP加端口访问应会被重定向到百度</p>
<p><strong>配置Basic认证</strong></p>
<p>对一些不带登录认证的网页 可以添加Basic认证 <strong>以起到额的外保护作用</strong><br>
<!-- -->在开启 Basic认证后会多一个登录验证的过程</p>
<p>设置Basic认证之前</p>
<img src="../../images/lucky-web/web-authentication-1.webp" width="60%" height="60%">
<p>编辑子规则 <strong>开启Basic认证开关</strong> 设置用户名和密码</p>
<img src="../../images/lucky-web/web-authentication-2.webp" width="60%" height="60%">
<p><strong>检视效果</strong></p>
<img src="../../images/lucky-web/web-authentication-3.webp">
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="常见问题">常见问题<a href="#常见问题" class="hash-link" aria-label="常见问题的直接链接" title="常见问题的直接链接" translate="no">​</a></h2>
<p>请参考官方说明：<a href="https://lucky666.cn/docs/modules/web" target="_blank" rel="noopener noreferrer">链接</a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考资料">参考资料<a href="#参考资料" class="hash-link" aria-label="参考资料的直接链接" title="参考资料的直接链接" translate="no">​</a></h2>
<ul>
<li><a href="https://www.welivesecurity.com/2023/05/18/5-search-engines-internet-connected-devices-services/" target="_blank" rel="noopener noreferrer">Top 5 search engines for internet-connected devices and services</a></li>
<li><a href="https://stackoverflow.com/questions/43156023/what-is-http-host-header" target="_blank" rel="noopener noreferrer">What is HTTP “Host” header?</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ie123610/ie12sBlog.Pages/edit/main/docs/articles/lucky-STUN/lucky-web.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-10-26T04:24:13.000Z" itemprop="dateModified">2025年10月26日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/articles/lucky-STUN/lucky-vxkex-compatible"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">使用VxKex使高版本LCUKY可在win7上运行</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/articles/lucky-STUN/stun-VNT-networkin"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">「LUCKY STUN穿透」在Windows下使用VNT组网为非HTTP服务固定STUN穿透端口</div></a></nav></div><br></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#关于本教程" class="table-of-contents__link toc-highlight">关于本教程</a></li><li><a href="#反向代理和正向代理的区别" class="table-of-contents__link toc-highlight">反向代理和正向代理的区别</a></li><li><a href="#使用简单反向代理的好处" class="table-of-contents__link toc-highlight">使用简单反向代理的好处</a><ul><li><a href="#端口复用" class="table-of-contents__link toc-highlight">“端口复用”</a></li><li><a href="#tls加密" class="table-of-contents__link toc-highlight">TLS加密</a></li><li><a href="#访问控制" class="table-of-contents__link toc-highlight">访问控制</a></li></ul></li><li><a href="#域名设置" class="table-of-contents__link toc-highlight">域名设置</a><ul><li><a href="#在dynv6中设置记录" class="table-of-contents__link toc-highlight">在Dynv6中设置记录</a></li><li><a href="#在cloudflare中设置记录" class="table-of-contents__link toc-highlight">在Cloudflare中设置记录</a></li></ul></li><li><a href="#配置地址解析" class="table-of-contents__link toc-highlight">配置地址解析</a></li><li><a href="#配置基础反向代理规则" class="table-of-contents__link toc-highlight">配置基础反向代理规则</a><ul><li><a href="#创建web规则" class="table-of-contents__link toc-highlight">创建WEB规则</a></li><li><a href="#编辑规则内容" class="table-of-contents__link toc-highlight">编辑规则内容</a></li><li><a href="#访问测试" class="table-of-contents__link toc-highlight">访问测试</a></li></ul></li><li><a href="#配置https" class="table-of-contents__link toc-highlight">配置HTTPS</a><ul><li><a href="#开启tls" class="table-of-contents__link toc-highlight">开启TLS</a></li><li><a href="#配置http重定向" class="table-of-contents__link toc-highlight">配置HTTP重定向</a></li></ul></li><li><a href="#防范恶意扫描" class="table-of-contents__link toc-highlight">防范恶意扫描</a><ul><li><a href="#来自网络扫描器的威胁" class="table-of-contents__link toc-highlight">来自网络扫描器的威胁</a></li><li><a href="#为未匹配域名的请求设置重定向" class="table-of-contents__link toc-highlight">为未匹配域名的请求设置重定向</a></li><li><a href="#v2105之后" class="table-of-contents__link toc-highlight">v2.10.5之后</a></li><li><a href="#编辑http重定向主规则" class="table-of-contents__link toc-highlight">编辑HTTP重定向主规则</a></li></ul></li><li><a href="#常见问题" class="table-of-contents__link toc-highlight">常见问题</a></li><li><a href="#参考资料" class="table-of-contents__link toc-highlight">参考资料</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><p>文章若无特殊说明则均使用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh-hans" target="_blank">CC BY-SA 4.0</a> 共享协议<br>
Powered by <a href="https://pages.cloudflare.com/" target="_blank">Cloudflare Pages</a> &amp; <a href="https://docusaurus.io/" target="_blank">Docusaurus</a><br><a href="https://icp.gov.moe/?keyword=20253610" target="_blank">萌ICP备20253610号</a></p></div></div></div></footer></div>
</body>
</html>